<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ü§ñ IFBot –°—Ç–∞—Ç—É—Å</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>

<style>
/* === –Ø–î–†–û === */
:root{
--p:#5B8DEF;--ok:#2ECC71;--warn:#F39C12;--err:#E74C3C;
--bg:#F8FAFD;--card:#fff;--text:#2D3748;--muted:#718096;
}
*{box-sizing:border-box}
body{
margin:0;font-family:-apple-system,BlinkMacSystemFont,Inter,system-ui;
background:linear-gradient(135deg,#f8fafd,#edf2f7);
color:var(--text)
}
.container{max-width:500px;margin:auto;padding:14px}

/* === HEADER === */
.header{
background:var(--card);border-radius:20px;padding:18px;
box-shadow:0 8px 30px rgba(0,0,0,.05);
text-align:center;position:relative;overflow:hidden
}
.header:before{
content:"";position:absolute;top:0;left:0;right:0;height:3px;
background:linear-gradient(90deg,var(--p),var(--ok),var(--warn),var(--err))
}
.status{
display:inline-flex;align-items:center;gap:10px;
margin-top:12px;padding:8px 16px;border-radius:14px;
background:#f9fafc;border:1px solid #e2e8f0
}
.dot{
width:10px;height:10px;border-radius:50%;
background:var(--ok);box-shadow:0 0 12px rgba(46,204,113,.5);
animation:pulse 2s infinite
}
@keyframes pulse{
0%{opacity:.6}50%{opacity:.2}100%{opacity:.6}
}

/* === CARDS === */
.grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin:16px 0}
.card{
background:var(--card);border-radius:14px;padding:14px;
box-shadow:0 6px 20px rgba(0,0,0,.04);
transition:.3s
}
.card:hover{transform:translateY(-2px)}
.label{font-size:12px;color:var(--muted)}
.value{font-size:22px;font-weight:700}

/* === BATTERY === */
.battery{width:46px;height:22px;border:2px solid #e2e8f0;
border-radius:8px;position:relative}
.battery::after{
content:"";position:absolute;right:-4px;top:50%;
width:4px;height:12px;background:#e2e8f0;transform:translateY(-50%)
}
.level{
height:100%;background:linear-gradient(90deg,#2ecc71,#27ae60);
border-radius:6px;transition:width .6s cubic-bezier(.4,1.4,.6,1)
}

/* === GRAPH === */
.graph{
background:var(--card);border-radius:16px;padding:16px;
box-shadow:0 6px 25px rgba(0,0,0,.05)
}
canvas{width:100%!important;height:240px!important}

/* === LOGS === */
.logs{
background:var(--card);border-radius:16px;padding:16px;margin-top:16px;
font-family:monospace;font-size:12px;max-height:200px;overflow:auto
}
.log{padding:6px 0;border-bottom:1px solid #edf2f7}
.log.error{color:var(--err)}
.log.warn{color:var(--warn)}

</style>
</head>

<body>
<div class="container">

<div class="header">
<h2>ü§ñ IFBot</h2>
<div class="status"><div class="dot"></div><span id="status">–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶</span></div>
</div>

<div class="grid">
<div class="card"><div class="label">–¶–∏–∫–ª</div><div class="value" id="cycle">0</div></div>
<div class="card">
<div class="label">–ë–∞—Ç–∞—Ä–µ—è</div>
<div style="display:flex;align-items:center;gap:10px">
<div class="battery"><div class="level" id="bat"></div></div>
<div class="value" id="batv">0%</div>
</div>
</div>
</div>

<div class="graph">
<canvas id="chart"></canvas>
</div>

<div class="logs" id="logs"></div>

</div>

<script>
const URL="https://raw.githubusercontent.com/dimb9ih/dimb9ih.github.io/master/ifbot_stats.json";
let chart,history=[];

async function load(){
const r=await fetch(URL+"?t="+Date.now());
const d=await r.json();
update(d)
}

function update(d){
document.getElementById("cycle").textContent=d.cycle_count||0;
document.getElementById("status").textContent=d.bot_status||"‚Äî";
const b=parseInt(d.battery_info?.battery_level||0);
document.getElementById("bat").style.width=b+"%";
document.getElementById("batv").textContent=b+"%";

if(d.last_log){
const logs=d.last_log.split("\n").slice(-10);
const box=document.getElementById("logs");
box.innerHTML="";
logs.forEach(l=>{
const div=document.createElement("div");
div.className="log"+(l.includes("ERROR")?" error":l.includes("WARN")?" warn":"");
div.textContent=l;
box.appendChild(div)
})
}
}

setInterval(load,30000);
load();
</script>
</body>
</html>
